# This file contains pin mappings for the BQ Hephestos2 from 2016
# It was sold in kit form, and uses its proprietary Zum Mega 3D board.
# This configuration has the heated bed enabled (sold as an option) as well as
#  the inductive sensor for Z limit switch and being able to calibrate the bed.
# However, this configuration does not include the LCD screen.

# To use this config, the firmware should be compiled for the AVR atmega2560.

# See docs/Config_Reference.md for a description of parameters.


[printer]
kinematics: cartesian
max_velocity: 150
max_accel: 2000
max_z_velocity: 3
max_z_accel: 50

[extruder]
step_pin: PA4  
dir_pin: !PA6  
enable_pin: !PA2 
microsteps: 8
full_steps_per_rotation: 200
rotation_distance: 7.667
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: PH6 
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PK5 
control: pid
pid_kp = 25.440
pid_ki = 1.094
pid_kd = 147.869
min_temp: 0
max_temp: 250

[heater_bed]
heater_pin: !PH5 
sensor_type: ATC Semitec 104GT-2
sensor_pin: PK7 
control = pid
pid_kp = 70.747
pid_ki = 1.638
pid_kd = 764.068
min_temp: 0
max_temp: 130

[probe]
pin: ^PD2
x_offset: 35
y_offset: 10
z_offset: 18.450
samples: 3
sample_retract_dist: 5
samples_result: median
samples_tolerance: 0.05
samples_tolerance_retries: 5

[stepper_x]
step_pin: PF0 
dir_pin: !PF1 
enable_pin: !PD7
microsteps: 16
full_steps_per_rotation: 200
rotation_distance: 20
endstop_pin: ^!PE5 
position_endstop: -1
position_min: -1
position_max: 209
homing_speed: 50

[stepper_y]
step_pin: PF6  
dir_pin: !PF7   
enable_pin: !PF2
microsteps: 16
full_steps_per_rotation: 200
rotation_distance: 20
endstop_pin: ^!PJ1
position_endstop: -1
position_min: -1
position_max: 296
homing_speed: 50

[stepper_z]
step_pin: PL3 
dir_pin: !PL1 
enable_pin: !PJ6 
microsteps: 8
rotation_distance: 0.2
endstop_pin: probe:z_virtual_endstop
position_min: -2
position_max: 210
homing_speed: 3

[safe_z_home]
home_xy_position: 99, 134
z_hop: 15

[stepper_z1]
step_pin: PC1  
dir_pin: !PC3
enable_pin: !PC7 
microsteps: 8
rotation_distance: 0.2

[fan]
pin: PB6 

[controller_fan controller_fan]
pin: PB5
fan_speed: 1.0

[output_pin beeper]
pin: PH3
pwm: True